image: bats/bats:latest

stages:
  - lint
  - test

lint:
  image: koalaman/shellcheck:latest
  script:
    - shellcheck hello.sh
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH

test:
  script:
    - bats hello_test.bats
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH 